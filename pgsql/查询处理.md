# 查询处理

## 排序
数据排序在数据库系统中有重要的作用。其原因有两个：第一个原因是SQL查询会指向对结果进行排序；第二个原因是当输入的关系已排序时，关系运算中的一些运算（如连接运算）能够得到高效实现。

如果内存中能完全容纳排序的数据，那么可以利用标准的排序技术（如快速排序）。如果不能，可以利用以下方法：

### 外部排序归并算法
对不能全部放在内存中的关系的排序称为**外排序**。外排序中最常用的技术是外部归并排序算法。

下面讲述该算法。令M表示内存缓冲区中可以用于排序的块数，即内存的缓冲区能容纳的磁盘块数。

1. 第一阶段，建立多个排好序的归并段。每个归并段都是排序过的，但仅包含关系中的部分数据。
2. 第二阶段，对归并段进行归并。暂时假定归并段的总数N小于M，这样我们可以为每个归并段文件分配一个块，此外剩下的空间还能容纳存放结果的一个块。归并阶段的工作流程如下：为N个归并段文件Ri个分配一个内存缓冲块，并分别读入一个数据块；
3. 