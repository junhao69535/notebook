# 基础内容

## 集群入门
Elasticsearch是优秀的**全文检索和分析引擎**。

### 全文检索
#### Lucene词汇表和架构
* 文档（document）：索引和搜索时使用的主要数据载体，包含一个或多个存有数据的字段。
* 字段（field）：文档的一部分，包含名称和值。
* 词（term）：一个搜索单元，表示文本中的一个词。
* 标记（token）：表示在字段文本中出现的词，由这个词的文本、开始和结束偏移量以及类型组成。

Lucene将所有信息写到一个称为**倒排索引（inverted index）的结构中。倒排索引建立索引中词和文档之间的映射。

每一个词指向包含它的文档编码。此外，每一个词有一个计数，统计出现频率。

每个索引分为多个“写一次，读多次”的段。建立索引时，一个段写入磁盘后就不能再更新。因此，被删除文档的信息存储再一个单独的文件中，但该段自身不被更新。

多个段可以通过段合并合并在一起。合并需要I/O，因此检索大段比检索存有相同数据的多个小段速度更快。当段合并时，不需要的信息将被删除。

#### 输入数据分析
传入文档中的数据怎样转化成倒排索引，查询文本怎样变成可被搜索的词？这个数据转化的过程被称为**分析**。

#### 评分和查询的相关性
评分时根据文档和查询的匹配度用计分公式计算的结果。


### Elasticsearch基础
#### 数据架构的主要概念
1. 索引：索引是Elasticsearch对逻辑数据的逻辑存储，所以它可以分成更小的部分。可以把索引堪称关系型数据库的表。然而，索引的结构是为快速有效的全文索引转杯的，特别是它不存储原始值。Elasticsearch可以把索引存放在一台机器或者分散在多台服务器上，每个索引有一个或多个分片，每个分片可以有多个副本。

2. 文档：存储在Elasticsearch中的主要实体。