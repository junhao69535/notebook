# fifo和lru以及lfu

虚拟存储系统分配页算法主要有FIFO、LRU和LFU

## FIFO
就是先进先出队列，可用数组或链表实现。

## LRU
最近使用最少的淘汰，和次数没有关系，就是简单的最近有没有被使用过。

1. 利用队列类型对象，记录最近操作的元素，总是放在队首，这样最久未操作的元素自然被相对移动到队尾；同时，当元素总数达到上限值时，优先移除与淘汰队尾元素。
2. 利用HashMap辅助对象，快速检索队列中存在的元素。

缺点：可能会由于一次冷数据的批量查询而误导大量热点的数据。

## LFU
最近使用次数（频率）最少的淘汰，需要给每个页维护一个计数，如果插入一个需要缓存的页已经在队列里，那么给这个页的计数加1，调整它在队列里的位置（和LRU不同，不一定到队头），如果不在队列里，从队头淘汰掉一个使用次数最少的，然后从队头插入这个页，且它的计数为1。

缺点：1. 最新加入的数据常常会被踢除，因为其起始方法次数少。 2. 如果频率时间度量是1小时，则平均一天每个小时内的访问频率1000的热点数据可能会被2个小时的一段时间内的访问频率是1001的数据剔除掉

## LRFU
正是由于LRU与LFU算法各具特点，所以在行业生产线上通常会联合两者使用。我们可以在LRU的实现基础上稍作衍生，能实现LRFU缓存机制，即可以采用队列分级的思想，例如oracle利用两个队列维护访问的数据元素，按被访问的频率的维度把元素分别搁在热端与冷端队列；而在同一个队列内，最后访问时间越久的元素会越被排在队列尾。